# Frontend Makefile for NoOversight

.PHONY: help install start stop restart clean build dev lint

help:
	@echo "NoOversight Frontend - Available Commands:"
	@echo "  make install    - Install dependencies"
	@echo "  make start      - Start the frontend dev server"
	@echo "  make stop       - Stop the frontend dev server"
	@echo "  make restart    - Restart the frontend dev server"
	@echo "  make build      - Build for production"
	@echo "  make dev        - Start development server (npm run dev)"
	@echo "  make clean      - Clean up node_modules and build artifacts"
	@echo "  make lint       - Run linter"

install:
	@echo "ğŸ“¦ Installing frontend dependencies..."
	npm install
	@echo "âœ… Frontend dependencies installed"

start:
	@echo "ğŸš€ Starting frontend..."
	@bash ../scripts/start-frontend.sh

stop:
	@echo "ğŸ›‘ Stopping frontend..."
	@bash ../scripts/stop-frontend.sh

restart: stop start
	@echo "ğŸ”„ Frontend restarted"

dev:
	@echo "ğŸ”§ Starting frontend in development mode..."
	npm run dev

build:
	@echo "ğŸ—ï¸  Building frontend for production..."
	npm run build
	@echo "âœ… Build complete"

preview:
	@echo "ğŸ‘€ Previewing production build..."
	npm run preview

clean:
	@echo "ğŸ§¹ Cleaning up..."
	rm -rf node_modules
	rm -rf dist
	rm -f .frontend.pid
	@echo "âœ… Cleanup complete"

lint:
	@echo "ğŸ” Running linter..."
	npm run lint || echo "Linter configuration needed"

status:
	@if [ -f .frontend.pid ]; then \
		PID=$$(cat .frontend.pid); \
		if ps -p $$PID > /dev/null 2>&1; then \
			echo "âœ… Frontend is running (PID: $$PID)"; \
		else \
			echo "âŒ Frontend is not running (stale PID file)"; \
		fi \
	else \
		echo "âŒ Frontend is not running"; \
	fi

